# 교착 상태 예방
- 애초에 교착 상태가 발생하지 않도록
- 교착 상태 발생 조건(상호 배제, 점유와 대기, 비선점, 원형 대기) 중 하나를 없애버리기

## 상호 배제를 없애면?
- 모든 자원을 공유 가능하게 만든다?
  - 한계: 현실적으로 모든 자원을 공유하는 건 불가능함

## 점유와 대기를 없애면?
- 특정 프로세스에게 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분
  - 단점: 자원의 활용률을 낮출 수 있는 방식

## 비선점 조건을 없애면?
- 선점이 가능한 자원(e.g. CPU)에 한하여 효과적
  - 한계: 모든 자원이 선점 가능한 것은 아님

## 원형 대기 조건을 없애면?
- 이걸 해내는 건 생각보다 어렵지 않음
  - 모든 자원에 번호를 붙이고, 붙인 번호의 오름차순대로 자원을 할당하면 원형 대기는 발생하지 않음
- 한계
  - 모든 자원에 번호를 붙이는 작업이 만만한 작업이 아님
  - 어떤 자원에 어떤 번호를 붙이느냐에 따라 활용률이 달라짐

## 정리
- 교착 상태 해결 방법으로 '교착 상태 예방'을 채택하면 
- 예방교착 상태가 발생하지 않음을 보장할 수 있지만, 부작용이 따름

---

# 교착 상태 회피
- 교착 상태를 **무분별한 자원 할당으로 인해 발생**했다고 간주
- 교착 상태가 발생하지 않을 만큼 **조심 조심 할당**하기
- 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 만큼만 자원 배분

## 교착 상태 회피의 핵심적인 용어
- 안전 순서열: 교착 상태 없이 안전하게 프로세스들에게 자원을 할당할 수 있는 순서
- 안전 상태: 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료될 수 있는 상태
  - 안전 순서열이 있는 상태
- 불안전 상태: 교착 상태가 발생할 수도 있는 상태
  - 안전 순서열이 없는 상태

## 교창 상태 회피는
- 항상 안전 상태만을 유지하게 끔 자원을 할당하는 방식

---

# 교착 상태 검출 후 회복
- 교착 상태 발생을 인정하고 사후에 조치하는 방식
- 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복
- **선점을 통한 회복, 프로세스 강제 종료를 통한 회복**

## 선점을 통한 회복
- 교착 상태가 회복될 때까지, 한 프로세스 씩 자원을 몰아주는 방식

## 프로세스 강제 종료를 통한 회복
- 교착 상태에 놓인 프로세스 모두 강제 종료( $\Rightarrow$ 작업 내용을 잃을 위험)
- 교착 상태가 해결될 때까지 한 프로세스씩 강제 종료( $\Rightarrow$ 오버헤드)