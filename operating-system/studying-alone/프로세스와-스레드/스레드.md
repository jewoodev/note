# 프로세스와 스레드
- 스레드는 프로세스를 구성하는 실행의 흐름, 이 흐름의 단위
- 하나의 프로세스는 하나 이상의 스레드를 가짐 
- 다수의 스레드를 이용하면 하나의 프로세스에서 여러 부분을 동시에 실행할 수 있음 (멀티 스레드 프로세스)

## 스레드 구성요소
- 프로세스 내에서 각기 다른 스레드 ID, 프로그램 카운터 값을 비롯한 레지스터 값, 스택으로 구성됨
- 각자 프로그램 카운터 값을 비롯한 레지스터 값, 스택을 가지고 있기 때문에 스레드마다 각기 다른 코드를 실행할 수 있음
  - 힙 영역, 데이터 영역, 코드 영역은 프로세스의 것을 공유함 
- 동료 스레드들과 코드 영역, 데이터 영역, 운영체제 자원을 공유함
- PCB 에서는 CPU 수행 단위(Program Counter, registers)만, 주소공간에서는 스택 영역만 독립적으로 가짐

여기서 중요한 점은 스레드들은 이렇듯 '실행에 필요한 최소한의 정보'만 유지하고 **프로세스 자원을 공유**하며 실행된다는 점이다.

- 3개의 스레드로써 병행 실행되는 프로세스가 있다면
  - 스택 영역에 1, 2, 3 스레드 각각의 스택이 따로 있고
  - 코드 영역에 1, 2, 3 스레드 각각의 프로그램 카운터가 따로 있음


- CPU에 처리해야 할 작업을 전달할 때 요즘 운영체제에선 프로세스가 아닌 스레드 단위로 전달함
  - 대부분의 전공서에선 아직까지 프로세스 단위로 전달한다고 설명됨

---

# 멀티프로세스와 멀티스레드
- 동일한 작업을 수행하는 단일 프로세스 여러 개 실행 vs 하나의 프로세스를 여러 스레드로 실행, 어떤 차이가 있을까? 
- 아주 큰 차이가 있음
- 프로세스끼리는 기본적으로 자원을 공유하지 않지만, 스레드끼리는 자원을 공유함
  - 애초에 메모리를 할당받는 구조가 이런 사용에 적합하게 그렇게 되어 있음

프로세스끼리 자원 공유가 불가능한 것은 아니지만, 메모리 공간이 서로 독립적이기 때문에 통신 비용이 비싸다. 스레드는 공유 자원을 통해 협력하고 통신하는데 비용이 매우 값싸다. 그래서 스레드를 통해 효율적인 병렬 처리가 가능하다. 이는 분명 스레드의 큰 강점이지만 단점도 있다.

1. 하나의 스레드에 문제가 생기면 프로세스 전체에 문제가 생길 수 있다.
2. 공유 자원을 쓰는 작업에서 동시성 문제가 발생할 수 있다.

## 프로세스 간 통신
프로세스는 IPC, Inter-Process_Communication(프로세스 간 통신) 를 통해 자원을 공유하고 데이터를 주고받을 수 있다. 또 서로 공유하는 메모리 영역을 둬서 데이터를 주고받을 수도 있다.

또 다른 방법도 있다. 소켓, 파이프를 통해 통신하는 것이다. 하지만 스레드가 통신하는 것과 비교했을 때 까다롭고 비용이 비싸므로 자주 일어나는 것은 좋지 않다.