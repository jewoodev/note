# 동기화

여러 프로세스들이 동시에 같은 목적을 올바르게 수행하기 위해 서로 협력할 때, 프로세스들은 실행 순서와 자원의 일관성을 보장해야 하기 때문에 반드시 **동기화**되어야 한다.

그래서 운영체제는 동시에 다수의 프로세스들이 실행될 때 실행 순서 제어를 위한 동기화와 상호 배제를 위한 동기화를 수행한다.

## 1. 실행 순서 제어를 위한 동기화

만약 Writer라는 txt파일에 값을 저장하는 프로세스와, Reader라는 txt파일에 저장된 값을 읽어 들이는 프로세스가 동시에 실행 중이라고 하자.

두 프로세스가 하는 역할이 이렇기 때문에 아무런 순서대로 실행되어서는 안된다. Reader 프로세스는 txt파일에 저장된 값을 읽어 들이는 걸 수행하는데 비어있는 txt를 읽는 것은 아무 작업을 하지 않는 것과 다를 바가 없기 때문이다.

다시 말해서 Reader 프로세스는 'txt파일에 값이 존재한다.' 라는 특정 조건이 만족되어야만 실행을 이어나갈 수 있다. 이렇듯 동시에 실행되는 프로세스를 올바른 순서대로 실행하기 위해 필요한 것이 실행 순서 제어를 위한 동기화이다.

## 2. 상호 배제를 위한 동기화

상호 배제(mutual exclusion)는 공유가 불가능한 자원의 동시 사용을 피하기 위해 사용하는 알고리즘이다. 

만약 은행 어플로 동시에 프로세스 두 개가 이체를 수행하느라 같은 시점에 계좌 금액을 읽는다면, 엉뚱한 결과로 이어질 수 있다. 10만원에 1만원, 2만원을 동시에 이체할 때 7만원이 아니라 9만원 혹은 8만원이 될 수 있기 때문이다.

고급 언어는 한 줄의 코드라고 하더라도 실행될 때 여러 줄의 저급 언어로 변환되고, 여러 줄의 코드를 수행하면서 문맥 교환이 일어날 수 있기 때문이다.

이렇게 동시에 접근하면 안되는 자원에 동시 접근하는 것을 막는 것이 상호 배제를 위한 동기화이다.

