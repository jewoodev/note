# 웹 서버와 WAS의 차이
## 웹 서버 (Web Server)
웹 서버는 정적인 콘텐츠를 처리하는 서버이다.

### 주요 기능
- HTML, CSS, JavaScript, 이미지 등 정적 파일을 클라이언트에게 전달 
- HTTP 프로토콜을 기반으로 클라이언트 요청을 받고 응답 
- 대표적인 예: Apache, Nginx, IIS

### 처리 방식
- 클라이언트가 index.html을 요청하면, 서버에 저장된 해당 파일을 그대로 전송.

## WAS (Web Application Server)
WAS는 동적인 콘텐츠를 처리하는 서버이다.

### 주요 기능
- 비즈니스 로직을 실행하고 동적 콘텐츠 생성 
- 데이터베이스 조회, 트랜잭션 처리 등 복잡한 작업 수행 
- 웹 서버 기능도 포함 (정적 콘텐츠도 처리 가능)
- 대표적인 예: Tomcat, JBoss, WebLogic, WebSphere

### 처리 방식
- 사용자가 로그인하면, 데이터베이스에서 정보를 조회하고 프로그램을 실행해서 결과를 동적으로 생성하여 전송.

## 왜 둘을 함께 사용할까요?
실무에서는 웹 서버와 WAS를 함께 사용하는 경우가 많다. 그 이유가 뭘까?

### 분리의 장점
- 효율성: 정적 콘텐츠는 웹 서버가, 동적 처리는 WAS가 담당하여 부하 분산 
- 보안: 웹 서버를 앞단에 두어 WAS를 직접 노출하지 않음 
- 확장성: WAS 서버를 여러 대로 늘리기 쉬움 (로드 밸런싱)
- 장애 대응: WAS에 문제가 생겨도 웹 서버에서 오류 페이지 제공 가능

## 일반적인 구조
- 클라이언트 → 웹 서버 (Nginx) → WAS (Tomcat) → 데이터베이스
- 소규모 애플리케이션에서는 WAS만 사용하기도 한다. WAS 자체에 웹 서버 기능이 포함되어 있기 때문이다.

# 순수 정적 자원만 vs 동적 자원이 조금이라도 섞이면? 처리 흐름의 차이
## 정적 콘텐츠만 있는 경우
```
클라이언트 → 웹 서버 → 클라이언트
```
웹 서버에서 바로 HTML, CSS, 이미지 등을 응답하고 끝난다.

## 동적 콘텐츠가 포함된 경우
```
클라이언트 → 웹 서버 → WAS → 웹 서버 → 클라이언트
```
웹 서버가 요청을 받아서 "이건 동적 처리가 필요하네"라고 판단하면 WAS로 전달한다.

## 실제 예시
### 웹 서버에서 처리
- /images/logo.png - 이미지 파일
- /css/style.css - CSS 파일
- /about.html - 정적 HTML

### WAS로 넘기는 경우
- /api/users - 사용자 목록 API 
- /login - 로그인 처리 
- /products?category=1 - 데이터베이스 조회 필요 
- /board/write - 게시글 작성 (DB 저장)

### 어떻게 구분할까?
웹 서버(예: Nginx)는 설정 파일에서 어떤 요청을 WAS로 넘길지 정의한다.

```nginx
# 정적 파일은 직접 처리
location /images/ {
root /var/www/static;
}

# .jsp, /api/* 등은 WAS(Tomcat)로 전달
location ~ \.jsp$ {
proxy_pass http://was_server:8080;
}
```

이렇게 URL 패턴이나 확장자를 기준으로 자동으로 판단하고 라우팅한다!

# WAS는 웹 서버와 웹 컨테이너의 조합이다?
## WAS의 구조
WAS = 웹 서버 + 웹 컨테이너(서블릿 컨테이너)
```
┌─────────────────────────────┐
│          WAS (Tomcat)       │
│  ┌────────────────────────┐ │
│  │     웹 서버 기능        │ │ ← HTTP 요청 받기, 정적 콘텐츠 처리
│  └────────────────────────┘ │
│  ┌────────────────────────┐ │
│  │  웹 컨테이너(서블릿)    │ │ ← 동적 처리, JSP/Servlet 실행
│  │  - JSP 엔진            │ │
│  │  - Servlet 엔진        │ │
│  │  - 비즈니스 로직       │ │
│  └────────────────────────┘ │
└─────────────────────────────┘
```

## 웹 컨테이너의 역할
- 서블릿 생명주기 관리: 서블릿의 생성, 초기화, 실행, 소멸 관리 
- JSP를 서블릿으로 변환하고 실행 
- 멀티스레딩 지원: 여러 요청을 동시에 처리 
- 세션 관리: 사용자 세션 유지 
- 데이터베이스 연결 풀 등의 자원 관리

## 예시로 보는 차이
### 순수 웹 서버 (Apache httpd)
- 웹 서버 기능만 있음 
- 동적 처리를 위해서는 별도 모듈(mod_php 등) 필요

### WAS (Tomcat)
- 웹 서버 기능 ✓ 
- 웹 컨테이너 기능 ✓ 
- 혼자서도 완전한 웹 애플리케이션 서비스 가능

개발할 때 Tomcat만 띄워도 웹사이트가 돌아가는 이유가 바로 이것 때문이다. 웹 서버 기능이 내장되어 있기 때문이다!
하지만 실무에서는 앞에서 살펴본 것처럼 성능, 보안, 확장성을 위해 Nginx 같은 웹 서버를 앞단에 두고 Tomcat을 뒤에서 웹 컨테이너로만 활용하는 경우가 많다.
