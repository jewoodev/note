# MongoDB의 백업 기능 현황
**기존 상황 (2024년 이전)**:
- MongoDB는 전통적으로 서비스 중단 없이 진행할 수 있는 **논리적 백업** 도구들을 제공해왔다
- `mongodump`와 `mongoexport` 같은 도구들이 대표적이다
- 물리적 백업의 경우, 일반적으로 데이터베이스 서비스를 중단하거나 특별한 구성이 필요했다

**현재 가능한 온라인 백업 방식**:
1. **MongoDB Atlas (클라우드 서비스)**
    - 연속 백업 기능 제공
    - 서비스 중단 없이 백업 가능

2. **Replica Set 활용**
    - 세컨더리 노드에서 백업 수행
    - 서비스 영향 최소화

3. **MongoDB Enterprise의 Ops Manager**
    - 엔터프라이즈 버전에서 백업 솔루션 제공


# 물리 백업과 논리 백업

## 논리 백업 vs 물리 백업의 차이

### 📄 **논리 백업 (Logical Backup)**

- **정의**: 데이터베이스의 구조와 데이터를 논리적 형태로 추출
- **방식**: SQL 문이나 데이터 형식으로 변환하여 백업
- **특징**:
    - 데이터를 읽어서 텍스트/바이너리 형태로 변환
    - 플랫폼 독립적
    - 선택적 백업 가능 (특정 컬렉션만)
    - 복원 시 데이터 재구성 과정 필요

**MongoDB 논리 백업 도구**:
- `mongodump` / `mongorestore`
- `mongoexport` / `mongoimport`

### 💾 **물리 백업 (Physical Backup)**

- **정의**: 데이터베이스 파일 자체를 그대로 복사
- **방식**: 데이터 파일, 인덱스 파일, 로그 파일 등을 직접 복사
- **특징**:
    - 파일 시스템 레벨에서 직접 복사
    - 빠른 백업/복원 속도
    - 전체 데이터베이스 상태 보존
    - 플랫폼 종속적

**MongoDB 물리 백업 방식**:
- 데이터 디렉토리 전체 복사
- 파일 시스템 스냅샷 활용
- 스토리지 레벨 백업

## 장단점 비교

| 구분      | 논리 백업          | 물리 백업       |
|---------|----------------|-------------|
| **속도**  | 상대적으로 느림       | 빠름          |
| **용량**  | 압축 가능, 작을 수 있음 | 원본과 동일한 크기  |
| **유연성** | 부분 백업/복원 가능    | 전체 백업만 가능   |
| **호환성** | 버전 간 호환성 좋음    | 동일 버전에서만 사용 |
| **일관성** | 온라인 상태에서 어려움   | 일관성 보장 어려움  |

## MongoDB에서의 온라인 물리 백업 문제

MongoDB에서 **서비스 중단 없는 온라인 물리 백업**이 어려운 이유:
1. **ACID 트랜잭션 보장의 복잡성**
2. **여러 파일 간 일관성 유지**
3. **진행 중인 쓰기 작업과의 충돌**
4. **인덱스 파일과 데이터 파일 동기화**

따라서 전통적으로 MongoDB에서는 물리 백업 시 서비스 중단이나 특별한 구성(replica set의 secondary 활용 등)이 필요했다.

