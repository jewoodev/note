## 1. 지연의 종류와 각각의 뜻

패킷은 네트워크를 통해 목적지에 도달하는 데까지 다양한 지연을 겪게 된다. 여기서 말하는 지연 중에 주요한 지연은 처리 지연, 큐잉 지연, 전송 지연, 전파 지연을 꼽을 수 있다. 각 지연이 어떤 것을 지칭하는지 고속도로 예시를 들어 설명하면 다음과 같다.

100km마다 요금계산소가 있는 고속도로를 생각해보자. 그리고 고속도로 요금계산소 사이를 링크로, 요금계산소를 라우터에 빗대어 생각해보자. 시간은 늦은 새벽 시간이어서 고속도로에 다른 차는 없다. 함께 여행하는 일행들의 차가 10대가 있고 이들이 일정한 순서대로 일렬로 줄을 맞춰 달린다고 가정한다. 

1. 차가 시속 100km(전파)로 고속도로를 달린다고 가정하자(차가 요금계산소를 통과하는 순간 시속 100km를 유지). 
2. 각 요금계산소는 10초마다 한 대의 차량을 서비스(전송)한다고 하자.
3. 차량 대열의 첫 번째 자동차가 요금계산소에 도착할 때마다 입구에서 다른 9대의 차가 도착할 때까지 기다려서 그 뒤에 줄을 서서 대기한다고 하자.

요금계산소가 전체 자동차를 밀어내는 데에 걸리는 시간은 100초, 1분 40초다. 이 시간은 라우터에서의 전송 지연과 비슷하다. 

하나의 차가 한 요금계산소에서 다음 계산소로 이동하는데에는 100km/(100km/h) = 1시간이 걸린다. 이 시간은 전파 지연과 비슷하다. 

그리고 차량 대열이 한 요금계산소 앞에 저장되는 시간으로부터 다음 계산소 앞에 저장될 때까지의 시간은 '전송 지연'과 '전파 지연'의 합이다.

'처리 지연'은 패킷 헤더를 확인하고 그 패킷을 어디로 보낼지 결정하는데 소요되는 시간을 말한다.

## 2. 큐잉 지연과 패킷 손실

이러한 지연들 중 가장 복잡하고 흥미로운 요소는 큐잉 지연이다. 다른 세 가지 지연(처리 지연, 전송 지연, 전파 지연)과 다르게 큐잉 지연은 패킷마다 다를 수 있다는 특징이 있다. 그러한 예시를 들어보자면 10개의 패킷이 비어 있는 큐에 동시에 도착하게 되면, 첫 패킷은 큐잉 지연을 겪지 않지만 마지막으로 도착한 패킷은 겪게 된다. 이런 특징으로 인해 큐잉 지연을 묘사할 때는 '평균 큐잉 지연', '큐잉 지연의 분산', '큐잉 지연이 특정 값을 넘을 확률' 같은 통계 값을 주로 측정한다.

큐잉 지연은 언제 커지고 작아질까? 이에 대한 답변은 

1. '트래픽이 큐에 도착하는 비율'
2. '링크의 전송률'
3. '트래픽이 주기마다 도착하는지, 아니면 한 번에 많은 양이 도착하는지'

에 의해 주로 결정된다. 이를 정리해보면 **트래픽 강도**에 의해 결정된다고 정리할 수 있는데 트래픽 강도가 무엇인지 알아보자.

트래픽 강도는 패킷이 큐에 도착하는 평균율 a(패킷/초 단위), R은 전송률(비트가 큐에서 밀려나는 비율), 그리고 패킷의 크기값 L으로 계산된다. 그 계산식은 `La/R`으로 `La/R > 1`이면 비트가 큐에 도착하는 평균율이 비트가 큐에서 전송되는 비율을 넘어선다. 

그렇게 되면 큐가 끝없이 증가하게 되고 큐잉 지연도 무한대에 도달하게 된다. 그래서 트래픽 공학의 주요 규칙 중 하나가 '트래픽 강도가 1보다 크지 않게 시스템을 설계하라`이다.

`La/R < 1`인 경우엔 도착 트래픽의 특성이 큐잉 지연에 영향을 미친다. 여기서 말하는 도착 트래픽의 특성은 '주기마다 트래픽이 도착하는지, 아니면 한 번에 많은 양이 도착하는지'에 대한 것을 말한다.

### 2.1 패킷 손실

현실에서 큐 용량은 유한하므로 큐가 가득찬 상태에서 패킷이 큐에 도달하면 라우터는 그 패킷을 버린다. 큐에서의 이런 오버플로우는 트래픽 강도가 1보다 클 때 일어난다. 손실되는 비율은 트래픽 강도가 클 수록 증가한다. 

노드에서의 성능을 측정하는데에는 지연뿐 아니라 패킷 손실 확률도 사용된다.

## 3. 컴퓨터 네트워크에서의 처리율

처리율은 '서버와 라우터 간의 링크 속도 Rs'와 '라우터와 클라이언트 간의 링크 속도 Rc'에 의해 결정된다. 어느 한 링크 속도가 더 낮게 되면 다른 쪽 링크에서 더 빠르게 많은 비트를 전송하더라도 다른 링크가 그 속도를 따라가지 못하기 때문에, 만약 네트워크 전송 경로가 '서버로부터 라우터 A로의 링크'와 '라우터 A로부터 클라이언트로의 링크'로만 구성된다면 네트워크의 처리율은 min{Rs, Rc}가 된다. 즉, 경로 상의 병목 링크의 전송률이 처리율이 된다.
