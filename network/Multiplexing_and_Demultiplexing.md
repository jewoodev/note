트랜스포트 계층의 다중화와 역다중화에 대해 알아보자. 이는 곧 네트워크 계층이 제공하는 '호스트 대 호스트 전달 서비스'에서 호스트에서 동작하는 애플리케이션에 대한 '프로세스 대 프로세스 전달 서비스'로 확장하는 것을 살펴보는 것과 같다. 다중화와 역다중화는 모든 컴퓨터 네트워크에서 필요하다는 점을 강조한다.

목적지 호스트의 트랜스포트 계층은 바로 아래의 네트워크 계층으로부터 세그먼트를 수신한다. 트랜스포트 계층은 호스트에서 동작하는 해당 애플리케이션 프로세스에게 이 세그먼트의 데이터를 전달하는 의무를 진다. 예를 들어, 여러분의 컴퓨터를 이용하여 하나의 FTP 세션과 2개의 텔넷 세션을 실행하면서 웹 페이지를 다운로드하고 있다고 가정하면, 여러분은 동작 중인 4개의 네트워크 애플리케이션 프로세스를 갖는다(탤넷 2, FTP 1, HTTP 1). 여러분 컴퓨터의 트랜스포트 계층이 하위의 네트워크 계층으로부터 데이터를 수신할 때, 트랜스포트 계층은 이 4개의 프로세스 중 하나에게 수신한 데이터를 전달할 필요가 있다. 이것을 어떻게 수행하는지 살펴보자.

소켓은 네트워크에서 프로세스로 데이터를 전달하고, 프로세스로부터 네트워크로 데이터를 전달하는 출입구 역할을 한다. 그러므로 수신 측 호스트의 트랜스포트 계층은 실제로 데이터를 직접 프로세스로 전달하지 않는다. 대신에 중간 매개자인 소켓에게 전달한다. 이떤 주어진 시간에 수신 측 호스트에 하나 이상의 소켓이 있을 수 있으므로, 각각의 소켓은 하나의 유일한 식별자를 갖는다. 이 식별자의 포맷은 소켓이 UDP 소켓인지 또는 TCP 소켓인지에 따라 달라진다.

이제 수신측 호스트가 수신한 트랜스포트 계층 세그먼트를 어떻게 적절한 소켓으로 향하게 하는지 생각해보자. 각각의 트랜스포트 계층 세그먼트는 이런 목적을 위해 세그먼트에 필드 집합을 갖고 있다. 수신 측의 트랜스포트 계층은 수신 소켓을 식별하기 위해 이런 필드를 검사한다. 그리고 이 세그먼트를 해당 소켓으로 보낸다. 트랜스포트 계층 세그먼트의 데이터를 올바른 소켓으로 전달하는 작업을 **역다중화**라고 한다. 출발지 호스트에서 소켓으로부터 데이터를 모으고, 이에 대한 세그먼트를 생성하기 위해 각 데이터에 헤더 정보(나중에 역다중화에 사용된다)로 캡슐화하고, 그 세그먼트들을 네트워크 계층으로 전달하는 작업을 **다중화**라고 한다.

이제 실제로 호스트에서 어떻게 수행되는지 살펴보자. 트랜스포트 계층 다중화에는 다음 두 가지 요구사항이 있다. 
1. 소켓은 유일한 식별자를 갖는다.
2. 각 세그먼트는 세그먼트가 전달될 적절한 소켓을 가리키는 특별한 필드를 갖는다.

특별한 필드라는 것은 **출발지 포트 번호 필드**와 **목적지 포트 번호 필드**다. 각각의 포트 번호는 0 ~ 65535 까지의 16비트 정수다. 그 중에서 0 ~ 1023까지의 포트 번호를 잘 알려진 포트 번호라고 하여 사용을 엄격하게 제한하고 있다. 

트랜스포트 계층이 어떻게 역다중화 서비스를 구현할 수 있는지 이제 이해할 것이다. 호스트의 각 소켓은 포트 번호를 할당받는다. 그리고 세그먼트가 호스트에 도착하면, 트랜스포트 계층은 세그먼트 안의 목적지 포트 번호를 검사하고 상응하는 소켓으로 세그먼트를 보내게 된다. 그러면 세그먼트의 데이터는 소켓을 통해 해당되는 프로세스로 전달된다. 이것은 UDP의 기본적인 동작 방식이다. TCP의 다중화/역다중화는 좀 더 많은 의미를 갖고 있다.