DNS 서버는 여러 단계에서 사용될 수 있으며, 각각의 역할이 다르다.

1. 도메인 등록 기관의 네임서버 (Authoritative DNS Servers)
    - 도메인의 공식적인 DNS 레코드를 관리하는 서버
    - 도메인의 IP 주소, MX 레코드 등 실제 DNS 정보를 저장하고 제공함
    - 예: example.com의 IP 주소가 1.2.3.4 라는 정보를 저장
2. 클라이언트의 DNS 서버 (Recursive DNS Servers)
    - 사용자의 컴퓨터나 네트워크에서 설정하는 DNS 서버
    - 실제로 DNS 조회를 수행하는 서버
    - 예: Google DNS(8.8.8.8), Cloudflare DNS(1.1.1.1)

작동 방식은 다음과 같다.

1. 사용자가 웹사이트에 접속하려고 할 때, 먼저 클라이언트의 DNS 서버에 문의한다.
2. 클라이언트의 DNS 서버는 도메인의 네임서버에 문의하여 실제 IP 주소를 얻는다.
3. 얻은 IP 주소를 사용자에게 반환한다.

이런 방식으로 도메인 이름을 실제 IP 주소로 변환하는 것을 도메인 네임 서버 조회(DNS Lookup) 또는 도메인 네임 확인(DNS Resolution)이라고 한다.

DNS 서버는 여러 단계의 DNS 서버가 협력하여 작동하는 시스템이다. 각각의 DNS 서버는 서로 다른 역할을 수행하며, 이들이 함께 작동하여 도메인 이름을 IP 주소로 변환하는 과정을 완성한다.

## 클라이언트의 DNS 서버는 도메인의 네임서버를 어떻게 찾을까?

이 과정은 "DNS Resolution" 또는 "DNS 조회" 과정이라고 하며, 다음과 같은 단계로 진행된다.

1. 클라이언트 디바이스의 DNS 서버 (Recursive DNS Server)
    - 사용자가 설정한 DNS 서버 (예: 8.8.8.8, 1.1.1.1)
    - 실제 DNS 조회를 수행하는 주체이다.
    - 이 서버가 나머지 DNS 조회 과정을 대신 수행한다.
2. Root DNS Servers (루트 DNS 서버)
    - 전 세계에 13개의 루트 DNS 서버가 있음
    - 모든 DNS 조회의 시작점
    - 최상위 도메인(TLD)의 네임서버 정보를 가지고 있음
    - 예: .com, .net, .org 등의 TLD 서버 정보
3. TLD DNS Servers (최상위 도메인 DNS 서버)
    - 각 최상위 도메인을 관리하는 서버
    - 해당 TLD에 속한 도메인의 네임서버 정보를 가지고 있음
    - 예: .com TLD 서버는 example.com의 네임서버 정보를 알고 있음
4. Authoritative DNS Servers (권한 있는 DNS 서버)
    - 실제 도메인의 DNS 레코드를 관리하는 서버
    - 최종적으로 도메인의 IP 주소 정보를 제공

실제 조회 과정은 다음과 같다.

- 사용자가 example.com에 접속하려고 할 때
    - 사용자의 디바이스는 먼저 설정된 DNS 서버(예: 8.8.8.8)에 문의
    - 설정된 DNS 서버가 루트 DNS 서버에 문의
    - 루트 서버는 .com TLD 서버의 주소를 알려줌
    - TLD 서버는 example.com의 네임서버 주소를 알려줌
    - 최종적으로 example.com의 네임서버에 문의하여 IP 주소를 얻음
    - 설정된 DNS 서버가 이 IP 주소를 사용자 디바이스에 반환

이 과정은 DNS 캐싱을 통해 최적화된다.

- 한 번 조회한 정보는 일정 시간 동안 캐시에 저장
- 같은 도메인을 다시 조회할 때는 캐시된 정보를 사용
- TTL(Time To Live) 값에 따라 캐시 유지 시간이 결정됨

이렇게 DNS는 계층적 구조로 설계되어 있어, 전 세계의 모든 도메인 정보를 효율적으로 관리할 수 있다.
