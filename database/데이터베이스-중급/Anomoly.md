- 데이터 모델링에서 가장 중요한 건 '무결성을 보장하는 것'

# Anomaly란?
- 데이터의 이상 현상
- 중복때문에 발생
  - 중복이 있다?
    - 의도하지 않은 이상 현상이 발생 가능성이 있다는 의미
- Update, Delete, Insert에서 발생할 수 있음

## Update anomaly
- 어떤 야구 구단의 선수들이, 어떤 팀에 소속되어 경기를 뛰는지 관리하는 테이블 (정규화 x)
  - 여러 팀에 소속될 수 있다고 가정
  - 홍길동이 소속된 팀이 세 곳 있음
    - 세 팀 중 하나가 포지션 컬럼 값을 '유격수' 로 수정함
    - 이 후, 야구 구단은 홍길동 선수는 2루수 포지션인데 유격수로 저장된 데이터가 있어 확인 절차를 밟아야 함
    - 실수로 '2루슈'로 저장할 수도 있음

## Insert anomaly
- 어떤 야구 구단의 선수들이, 어떤 팀에 소속되어 경기를 뛰는지 관리하는 테이블 (정규화 x)
  - 여러 팀에 소속될 수 있다고 가정
  - '팀 번호' 컬럼이 기본 키로 설정되어 있음
  - 장길동이 호호맨스 팀에 소속되기로 함, 팀 번호는 아직 받지 못했음
    - 기본 키 값은 `NULL`을 저장할 수 없어 등록할 수 없음
    - 전산실에서는 당신이 프로든 뭐든 입력이 안되는데 어떡합니까?
    - 장길동은 당신들 고소할거야! 
    - 

## Anomaly를 만들지 않는 방법
```
- 어떤 야구 구단의 선수들이, 어떤 팀에 소속되어 경기를 뛰는지 관리하는 테이블 (정규화 x)
  - 여러 팀에 소속될 수 있다고 가정
``` 
이 예제는 구단과 선수 간의 관계에 M:N 의 관계를 갖는다. 따라서 중간에 소속 테이블을 만들어서 구단 테이블과 선수 테이블 각각에 1:M, 1:N 관계를 갖도록 설계해야 중복을 제거할 수 있다.

마스터 테이블에서는 중복이 절대 나오지 않는다. 관계 테이블에서만 중복이 나타난다(그것도 FOREIGN KEY에서만).

## Foreign key는 관계를 나타내는 정보
외래 키가 중복된다고 보는 것은 잘못된 시각이다. 외래 키는 테이블 간의 관계를 나타내는 연결 정보이지 그 자체가 데이터가 아니기 때문이다. "중복은 데이터에서만 생겨날 수 있다."

# 무결성
테이블 전체를 바라봤을 땐 중복이 많이 존재하는 테이블이더라도, 적어도 프라이머리 키만은 무조건 중복없이 하나씩만 존재하는 원칙

이 원칙이 무너지면 굉장히 많은 anomaly가 발생한다.

# 리플 이펙트
하나의 작업이 일으킨 영향이 이후에 물결쳐 더 큰 (여러 개의) 영향을 만들어내는 현상

