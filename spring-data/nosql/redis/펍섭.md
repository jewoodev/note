## Redis Pub/Sub 구현 예시

```java
@Configuration
public class RedisConfig {
    @Bean
    public ReactiveRedisMessageListenerContainer listenerContainer(ReactiveRedisConnectionFactory connectionFactory) {
        return new ReactiveRedisMessageListenerContainer(connectionFactory);
    }
}

@RequiredArgsConstructor
@Component
public class RedisPubSub {
    private final ReactiveRedisTemplate<String, String> redisTemplate;
    private final ReactiveRedisMessageListenerContainer listenerContainer;

    public void subscription() {
        listenerContainer.receive(new PatternTopic("Your pattern"))
            .doOnError(error -> log.error("Redis subscription error: ", error))
            .subscribe(message -> {
                String payload = message.getPayload();
                log.info("Received message: {}", payload);
            });
    }

    public void publish(String message) {
        redisTemplate.convertAndSend("Your channel following your pattern", message)
            .subscribe(result -> log.info("Message sent: {}", result));
    }
}
```

위의 Redis Pub/Sub 예시는 패턴을 이용해 한 번의 구독으로 여러 채널을 구독하는 예시이다. `listenerContainer.receive`가 구독하는 역할을 수행하고, `redisTemplate.convertAndSend`가 발행하는 역할을 수행한다.

`PatternTopic`은 Redis의 Pub/Sub(발행/구독) 메커니즘에서 사용되는 패턴 매칭 기반의 토픽을 나타내는 클래스입니다. 주요 특징과 개념을 살펴보자.


1. **패턴 매칭 지원**
    - Redis의 `PSUBSCRIBE` 명령어와 유사한 기능을 제공한다.
    - 와일드카드 패턴을 사용하여 여러 토픽을 한 번에 구독할 수 있다.
    - 예: `news.*` 패턴으로 `news.sports`, `news.weather` 등 모든 news 관련 토픽을 구독할 수 있다.

2. **주요 패턴 문자**
    - `*`: 0개 이상의 문자와 매칭
    - `?`: 정확히 하나의 문자와 매칭
    - `[...]`: 대괄호 안의 문자 중 하나와 매칭
    - `\`: 특수 문자를 이스케이프

Redis의 패턴 매칭 규칙에 대한 공식 문서는 다음과 같다.

- [Redis 공식 문서의 PSUBSCRIBE 명령어 설명 페이지](https://redis.io/commands/psubscribe/)