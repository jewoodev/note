# 템플릿 메서드 패턴과 템플릿 콜백 패턴

코드에 중복이 많아질 때 중복되는 코드 라인에 매번 변화하는 코드가 끼어있으면 메서드로 분리하는 것이 불가능해 변경에 취약해지는 문제를 해결할 수 없다.

이럴 때 템플릿 메서드 패턴과 템플릿 콜백 패턴을 쓸 수 있다. 

템플릿 메서드 패턴은 추상 클래스에 "변화하지 않는" 코드를 구현하고 변화하는 코드를 추상 메서드로 구현해 본래의 로직은 유지하면서 "변화하는" 코드를 분리해내는 방법으로 이 문제를 해결하는 패턴이다.

```java
public abstract class AbstractTemplate {
    public void execute() {
        // 변화하지 않는 코드
        call(); // 변화하는 코드
        // 변화하지 않는 코드
    }
    
    public abstract void call();
}
```

템플릿 콜백 패턴은 "변화하는" 코드는 별도의 인터페이스로 만들고 이를 "변화하지 않는" 코드를 구현한 클래스의 메서드에 파라미터로 집어넣는다.

```java
public class Template {
    public void execute(Callback callback) {
        // 변화하지 않는 코드
        callback.call(); // 변화하는 코드
        // 변화하지 않는 코드
    }
}

public interface Callback {
    void call();
}
```

## 두 패턴의 서로 다른 장점과 단점

템플릿 메서드 패턴은 템플릿을 구현하고 나면 이를 변경할 수 없는 엄격한 구조로 되어있다. 그래서 재사용을 계속하는 경우에는 한 번 생성해놓고 계속 쓰기에 적합하다. 그게 아니라면 한 번 사용하고 나서는 다른 로직으로 동작해야 하는데 그럴 때마다 템플릿을 새로 생성하는데서 비용이 낭비된다.

템플릿 콜백 패턴은 템플릿과 콜백되는 메서드를 객체 단위에서 분리함으로써 템플릿은 그대로 재활용하면서 메서드만 갈아끼우면 되는 방식으로 쓰인다. 그렇기 때문에 템플릿 메서드 패턴과는 다르게 한 번만 사용되는 구현체들이 많은 경우 비용을 효율적으로 사용한다.